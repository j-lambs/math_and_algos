---
title: "spy"
author: "jrellamas"
date: "`r Sys.Date()`"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse, glue)
```

```{r}
buy_close_strat <- function(historical) {
  browser()
  for (i in 1:length(historical[[1]])) {
    
  }
}
```


```{r}
SPY <- read.csv("/Users/rellamas/math_and_algos/SPY/SPY.csv")

# ggplot(data = SPY, aes(x = Date, y = Close)) +
#   geom_point()

old <- SPY$Open[1]
new <- SPY$Close[754]
p_change_normal <- ( new - old ) / old
glue('2Y % Change: {p_change_normal}')
overnight_vect <- c()
overnight_percent_change_vect <- c()
for (i in 1:length(SPY[[1]])) {
  close <- SPY$Close[i]
  next_open <- SPY$Open[i + 1]
  if (!is.na(next_open)) {
    overnight <- next_open - close
    night_percent <- (next_open - close) / close
    overnight_vect <- c(overnight_vect, overnight)
    overnight_percent_change_vect <- c(overnight_percent_change_vect, night_percent)
  }
  
  print(glue('Close: {close}, Next Open: {next_open}'))
}
overnight_sum <- sum(overnight_vect)

```

